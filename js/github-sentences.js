// Generated by CoffeeScript 1.3.3
(function() {
  var github_event_types, link_to, repo_link, strip_hash, user_link;

  repo_link = function(name) {
    return "<a href=\"http://github.com/" + name + "\" target=\"_blank\">" + name + "</a>";
  };

  user_link = function(username) {
    return "<a href=\"http://github.com/user/" + username + "\" target=\"_blank\">" + username + "</a>";
  };

  strip_hash = function(link) {
    return link.replace(/\#.*$/, '');
  };

  link_to = function(url, name) {
    return "<a href=\"" + url + "\" target=\"_blank\">" + (name || url) + "</a>";
  };

  github_event_types = {
    "CommitCommentEvent": {
      name: "Commit Comment",
      render: function(event) {
        return {
          sentence: " " + (user_link(event.actor.login)) + " commented on a commit in\n" + (link_to(strip_hash(event.payload.comment.html_url), event.repo.name)) + " "
        };
      }
    },
    "CreateEvent": {
      name: "Repo or Branch Created",
      render: function(event) {
        if (event.payload.ref_type === "repository") {
          return {
            sentence: " " + (user_link(event.actor.login)) + " created " + event.payload.ref_type + " " + (repo_link(event.repo.name)) + " "
          };
        } else {
          return {
            sentence: " " + (user_link(event.actor.login)) + " created " + event.payload.ref_type + " \"" + event.payload.ref + "\" on " + (repo_link(event.repo.name)) + " "
          };
        }
      }
    },
    "DeleteEvent": {
      name: "Branch/Tag Deleted",
      render: function(event) {
        return {
          sentence: " " + (user_link(event.actor.login)) + " deleted " + event.payload.ref_type + " \"" + event.payload.ref + "\" on " + (repo_link(event.repo.name)) + " "
        };
      }
    },
    "DownloadEvent": {
      name: "Download",
      render: function(event) {
        return {
          sentence: " " + (user_link(event.actor.login)) + " uploaded " + (link_to(event.payload.download.html_url, event.payload.download.name)) + "\nto " + (repo_link(event.repo.name)) + " "
        };
      }
    },
    "FollowEvent": {
      name: "User Followed"
    },
    "ForkEvent": {
      name: "Fork",
      render: function(event) {
        return {
          sentence: " " + (user_link(event.actor.login)) + " forked " + (repo_link(event.repo.name)) + "\nto " + (repo_link(event.payload.forkee.full_name)) + " "
        };
      }
    },
    "ForkApplyEvent": {
      name: "Fork Applied"
    },
    "GistEvent": {
      name: "Gist Created/Updated"
    },
    "GollumEvent": {
      name: "Wiki Updated"
    },
    "IssueCommentEvent": {
      name: "Issue Comment"
    },
    "IssuesEvent": {
      name: "Issue Opened/CLosed"
    },
    "MemberEvent": {
      name: "Collaborator Added"
    },
    "PublicEvent": {
      name: "Repo Open-Sourced"
    },
    "PullRequestEvent": {
      name: "Pull Request Opened/CLosed"
    },
    "PullRequestReviewCommentEvent": {
      name: "Pull Request Comment"
    },
    "PushEvent": {
      name: "Push",
      render: function(event) {
        return {
          sentence: " " + (user_link(event.actor.login)) + " pushed to " + (repo_link(event.repo.name)) + " "
        };
      }
    },
    "TeamAddEvent": {
      name: "Team Added"
    },
    "WatchEvent": {
      name: "Repo Watched",
      render: function(event) {
        return {
          sentence: " " + (user_link(event.actor.login)) + " " + event.payload.action + " watching " + (repo_link(event.repo.name)) + " "
        };
      }
    }
  };

  window.githubSentences = {
    convert: function(event) {
      var converted, html;
      if (github_event_types[event.type]["render"] != null) {
        converted = github_event_types[event.type]["render"](event);
      } else {
        converted = {
          sentence: event.type
        };
      }
      html = "<div class=\"github-item\">\n  <div class=\"sentence\">" + converted.sentence + "</div>\n  <div class=\"timestamp\">" + event.created_at + "</div>";
      if (converted.details != null) {
        html += " <div class=\"details\">" + converted.details + "</div> ";
      }
      return html += "</div>";
    }
  };

}).call(this);
